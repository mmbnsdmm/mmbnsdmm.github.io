(self.webpackChunktest4vuecli=self.webpackChunktest4vuecli||[]).push([[664],{65341:function(e,t,i){var n=i(42241);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,i(56).Z)("d5725e46",n,!0,{sourceMap:!1,shadowMode:!1})},15574:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n={name:"fui-footer",props:{navigate:{type:Array,default:function(){return[]}},text:{type:String,default:""},color:{type:String,default:"#B2B2B2"},size:{type:[Number,String],default:24},background:{type:String,default:"transparent"},borderColor:{type:String,default:"#B2B2B2"},isFixed:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!0}},computed:{linkColor(){const e=uni&&uni.$fui&&uni.$fui.color;return e&&e.link||"#465CFF"}},data(){return{iphoneX:!1}},created(){},methods:{}},o=(i(65341),(0,i(69453).Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"fui-footer",class:[e.isFixed?"fui-footer__fixed-bottom":""],style:{background:e.background}},[e.navigate.length>0?i("v-uni-view",{staticClass:"fui-footer__link"},e._l(e.navigate,(function(t,n){return i("v-uni-navigator",{key:n,staticClass:"fui-link__item",class:{"fui-link__color":!t.color},attrs:{"hover-class":"fui-link-hover","hover-stop-propagation":!0,"open-type":t.openType||"navigate",url:t.url,delta:t.delta}},[i("v-uni-text",{staticClass:"fui-link__text",class:{"fui-link__text-border":n===e.navigate.length-1},style:{color:t.color||e.linkColor,fontSize:(t.size||28)+"rpx",borderColor:e.borderColor,lineHeight:(t.size||28)+"rpx"}},[e._v(e._s(t.text))])],1)})),1):e._e(),i("v-uni-view",{staticClass:"fui-footer__text",class:{"fui-as__safe-weex":e.iphoneX&&e.safeArea}},[i("v-uni-text",{style:{color:e.color,fontSize:e.size+"rpx"}},[e._v(e._s(e.text))])],1)],1)}),[],!1,null,"460794e6",null,!1,undefined,undefined).exports)},18445:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var n,o={fuiFooter:i(15574).Z},r=(i(41539),i(54747),i(40561),{name:"PageFooter",beforeCreate:function(){n=this},mounted:function(){var e=getCurrentPages(),t=e[e.length-1].route;t="/"+t,n.siteUrls.forEach((function(e,i){e.url===t&&n.siteUrls.splice(i,1)}))},props:{isGuest:{type:Boolean,default:!1}},data:function(){return{siteUrls:[{text:"首页",openType:"redirect",url:"/pages/site/Index"},{text:"登录",openType:"redirect",url:"/pages/site/Login"},{text:"邮箱登录",openType:"redirect",url:"/pages/site/LoginByEmail"},{text:"注册",openType:"redirect",url:"/pages/site/Signup"},{text:"忘记密码",openType:"redirect",url:"/pages/site/ResetPassword"}],authUrls:[{text:"首页",openType:"redirect",url:"/pages/site/Index"},{text:"个人中心",openType:"redirect",url:"/pages/user/center/Center"}]}}}),a=(0,i(69453).Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("fui-footer",{attrs:{text:"Copyright © 2017 xuba5f.bnsdmm.top",navigate:e.isGuest?e.siteUrls:e.authUrls,isFixed:!0}})],1)}),[],!1,null,"e1a4519a",null,!1,o,undefined).exports},70801:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n,o={uButton:i(1445).Z},r=(i(47941),i(26699),i(32023),i(92222),i(18445)),a=i(8322),s=i.n(a),u={name:"TestTestUpload",components:{PageFooter:r.Z},beforeCreate:function(){n=this},data:function(){return{chooseVideoSrc:"",options:{singleFile:!0,target:n.$api.getServerApiBaseUri()+"/user/file/chuck-upload",testChunks:!0,checkChunkUploadedByResponse:function(e,t){var i=JSON.parse(t);return 200===i.status&&(i.isExist>0?(console.log(i),n.fileStatusText.success="秒传",!0):(i.uploaded||[]).includes(e.offset+1))},chunkSize:2097152,simultaneousUploads:5,maxChunkRetries:2,headers:{Authorization:"Bearer "+n.$store.getters["Auth/getUserInfo"].token},query:function(e,t,i){}},fileStatusText:{success:"成功",error:"失败",uploading:"上传中",paused:"暂停",waiting:"等待中"},attrs:{accept:"video/*"}}},methods:{test1:function(){uni.chooseVideo({count:1,maxDuration:60,success:function(e){n.chooseVideoSrc=e.tempFilePath}})},computeMD5:function(e){n.fileStatusText.success="计算中";var t=new FileReader,i=(new Date).getTime(),o="",r="";e.pause(),t.readAsArrayBuffer(e.file),t.onload=function(t){e.size===t.target.result.byteLength?(o=s().ArrayBuffer.hash(t.target.result),r=o+"."+e.size+"."+e.name.split(".").pop(),n.options.query.uniqueIdentifier=r,console.log("MD5计算完毕：".concat(e.id," ").concat(e.name," MD5：").concat(o," 用时：").concat((new Date).getTime()-i," ms")),e.uniqueIdentifier=r,e.resume()):uni.$u.toast("Browser reported success but could not read the file until the end.")},t.onerror=function(){uni.$u.toast("FileReader onerror was triggered, maybe the browser aborted due to high memory usage.")}},mergeFile:function(e,t,i,o){"秒传"!==n.fileStatusText.success&&(n.fileStatusText.success="合并中",n.$api.post("/user/file/chunk-merge",{uniqueIdentifier:t.uniqueIdentifier}).then((function(e){200!==e.status?n.fileStatusText.success=e.message:(e.isExist>0?n.fileStatusText.success="秒传":n.fileStatusText.success="成功",console.log(e.url))})))}}},l=(0,i(69453).Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",[e._e(),i("v-uni-view",[i("uploader",{staticClass:"uploader-example",attrs:{options:e.options,"auto-start":!1,"file-status-text":e.fileStatusText},on:{"file-added":function(t){arguments[0]=t=e.$handleEvent(t),e.computeMD5.apply(void 0,arguments)},"file-success":function(t){arguments[0]=t=e.$handleEvent(t),e.mergeFile.apply(void 0,arguments)}}},[i("uploader-unsupport"),i("uploader-drop",[i("uploader-btn",{attrs:{attrs:e.attrs}},[e._v("选择视频")])],1),i("uploader-list")],1)],1)],1),e._e()],1)}),[],!1,null,"338724b0",null,!1,o,undefined),f=l.exports},42241:function(e,t,i){"use strict";i.r(t);var n=i(43481),o=i.n(n),r=i(2400),a=i.n(r)()(o());a.push([e.id,'.fui-footer[data-v-460794e6]{flex:1;\nwidth:100%;box-sizing:border-box;word-break:break-all;\noverflow:hidden;padding-top:%?32?%;padding-bottom:%?32?%;padding-left:%?32?%;padding-right:%?32?%}.fui-footer__fixed-bottom[data-v-460794e6]{position:fixed;z-index:99;bottom:0;left:0;right:0;\nleft:constant(safe-area-inset-left);left:env(safe-area-inset-left);right:constant(safe-area-inset-right);right:env(safe-area-inset-right)\n}.fui-footer__link[data-v-460794e6]{\ndisplay:flex;\nflex-direction:row;align-items:center;justify-content:center;font-size:%?28?%}\n.fui-link__color uni-text[data-v-460794e6],\n.fui-link__color[data-v-460794e6]{color:var(--fui-color-link,#465cff)!important}\n.fui-link__item[data-v-460794e6]{position:relative;line-height:1}.fui-link__text[data-v-460794e6]{padding:0 %?18?%;\n\nfont-weight:400}.fui-link__text-border[data-v-460794e6]{border-right-width:0}\n.fui-link__item[data-v-460794e6]::before{content:" ";position:absolute;right:0;top:%?4?%;width:1px;bottom:%?4?%;border-right:1px solid var(--fui-color-label,#b2b2b2);-webkit-transform-origin:100% 0;transform-origin:100% 0;-webkit-transform:scaleX(.5);transform:scaleX(.5)}.fui-link__item[data-v-460794e6]:last-child::before{border-right:0!important}\n.fui-link-hover[data-v-460794e6]{opacity:.5}.fui-footer__text[data-v-460794e6]{flex:1;\n\nline-height:1;text-align:center;padding-top:%?8?%;\npadding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);\nfont-weight:400}\n\n\n\n',""]),t.default=a}}]);