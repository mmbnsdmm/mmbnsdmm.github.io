"use strict";(self.webpackChunktest4vuecli=self.webpackChunktest4vuecli||[]).push([[3681],{20716:function(e,n,t){t.r(n),t.d(n,{default:function(){return l}});var a,r={uniSection:t(54782).Z,uAlert:t(16480).Z,uniRow:t(50447).Z,uniForms:t(99241).Z,uniCol:t(63933).Z,uniFormsItem:t(77720).Z,uniDataCheckbox:t(67370).Z,uniEasyinput:t(69958).Z,uButton:t(1445).Z,"u-Text":t(4827).Z},u=t(4587),o=(t(57658),t(35666),{name:"UserWalletCz",beforeCreate:function(){a=this},created:function(){a.getCanCz()},onReady:function(){a.$refs.form.setRules(a.czRules)},data:function(){return{canCz:{canCzMsg:"能否下单支付获取中...",payChannels:[],precautionsText:"",handlingOfDroppedOrdersText:""},formData:{channel:1,amount:""},czRules:{channel:{rules:[{required:!0,errorMessage:"请选择支付渠道"}]},amount:{rules:[{required:!0,errorMessage:"请输入充值金额"},{validateFunction:function(e,n,t,a){return(100*n<0||100*n>1e4)&&a("充值金额必须为正数且不能超过100"),!0}},{pattern:"^(0|[1-9]\\d*)(.\\d{1,2})?$",errorMessage:"金额不正确"}]}}}},methods:{getCanCz:function(){return(0,u.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$api.post("/user/wallet/can-cz");case 2:n=e.sent,a.canCz.canCzMsg=n.canCzMsg,a.canCz.payChannels=n.payChannels,a.canCz.precautionsText=n.precautionsText,a.canCz.handlingOfDroppedOrdersText=n.handlingOfDroppedOrdersText;case 7:case"end":return e.stop()}}),e)})))()},czApply:function(){a.$refs.form.validate().then(function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={channel:a.formData.channel,amount:a.formData.amount},e.next=3,a.$api.post("/user/wallet/cz-apply",t);case 3:200===(r=e.sent).status&&a.goInfo(r.order_id);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(){}))},goInfo:function(e){a.$router.push({path:"/pages/user/wallet/CzOrderInfo",query:{id:e,fromPage:"user_wallet_CzOrderInfo"}})}}}),s=o,i=(0,t(69453).Z)(s,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"container"},[t("uni-section",{attrs:{title:"充值下单",type:"line"}}),t("v-uni-view",{class:{"p-[15px]":!0}},["can"===e.canCz.canCzMsg?t("v-uni-view",[t("v-uni-view",{class:{"pb-[15px]":!0}},[t("u-alert",{attrs:{title:"注意事项",type:"error",description:e.canCz.precautionsText}}),t("u-alert",{attrs:{title:"掉单处理",type:"warning",description:e.canCz.handlingOfDroppedOrdersText}})],1),t("uni-row",[t("uni-forms",{ref:"form",attrs:{modelValue:e.formData,rules:e.czRules,"label-width":100}},[t("uni-col",{attrs:{span:24}},[t("uni-forms-item",{attrs:{label:"支付渠道",name:"channel",required:!0}},[t("uni-data-checkbox",{attrs:{localdata:e.canCz.payChannels},model:{value:e.formData.channel,callback:function(n){e.$set(e.formData,"channel",n)},expression:"formData.channel"}})],1),t("uni-forms-item",{attrs:{label:"充值金额",name:"amount",required:!0}},[t("uni-easyinput",{attrs:{type:"number",maxlength:"6",placeholder:"请输入充值金额"},model:{value:e.formData.amount,callback:function(n){e.$set(e.formData,"amount",n)},expression:"formData.amount"}})],1),t("u-button",{attrs:{type:"primary",size:"default"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.czApply.apply(void 0,arguments)}}},[e._v("确定充值")])],1)],1)],1)],1):t("v-uni-view",[t("uni-row",[t("uni-forms",{ref:"form",attrs:{modelValue:e.formData,rules:e.czRules,"label-width":100}},[t("uni-col",{attrs:{span:24}},[t("uni-forms-item",{attrs:{label:"充值金额",name:"amount",required:!0}},[t("uni-easyinput",{attrs:{type:"number",maxlength:"6",placeholder:"请输入充值金额",disabled:!0},model:{value:e.formData.amount,callback:function(n){e.$set(e.formData,"amount",n)},expression:"formData.amount"}})],1),t("u-button",{attrs:{size:"default",disabled:!0},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.czApply.apply(void 0,arguments)}}},[e._v(e._s(e.canCz.canCzMsg))])],1)],1)],1)],1),t("u--text",{staticClass:"w-fit",attrs:{type:"info",decoration:"underline",text:"充值记录"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.$router.push("/pages/user/wallet/CzList")}}})],1)],1)}),[],!1,null,null,null,!1,r,undefined),l=i.exports}}]);